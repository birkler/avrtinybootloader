<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>USB IR HID Device: uart_io/uart_io.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>uart_io/uart_io.c File Reference</h1><code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;avr/io.h&gt;</code><br/>
<code>#include &lt;avr/interrupt.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="uart__io_8c_source.html">uart_io.h</a>&quot;</code><br/>
<code>#include &lt;util/setbaud.h&gt;</code><br/>

<p><a href="uart__io_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcircular__buffer__t.html">circular_buffer_t</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structuart__t.html">uart_t</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart__io_8c.html#a20284c1a5cb263456f6f1fc477e858b7">UART_IO_CONCAT</a>(a, b)&nbsp;&nbsp;&nbsp;a ## b</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart__io_8c.html#a40a2445de01e754477cc88f8158d69e8">UART_IO_CONCAT_EXPANDED</a>(a, b)&nbsp;&nbsp;&nbsp;UART_IO_CONCAT(a, b)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart__io_8c.html#aee801a210ff61e73dda8784c521ae8cc">UART_IO_UTIL_OUTPORT</a>(name)&nbsp;&nbsp;&nbsp;UART_IO_CONCAT(PORT, name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart__io_8c.html#ab512a899593e996c5519fdbbf75f3ccf">UART_IO_UTIL_INPORT</a>(name)&nbsp;&nbsp;&nbsp;UART_IO_CONCAT(PIN, name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart__io_8c.html#ab4ea91b215ac10da636f3f5198a3d5d0">UART_IO_UTIL_DDRPORT</a>(name)&nbsp;&nbsp;&nbsp;UART_IO_CONCAT(DDR, name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart__io_8c.html#a838fd526e8145e1b438c122593b5dcc5">INVERTER1_IN_OUTPORT</a>&nbsp;&nbsp;&nbsp;UART_IO_UTIL_OUTPORT(INVERTER1_IN_PORT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart__io_8c.html#aa0d9ac60fecf4685e2220fb3821515d2">INVERTER1_IN_DDRPORT</a>&nbsp;&nbsp;&nbsp;UART_IO_UTIL_DDRPORT(INVERTER1_IN_PORT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart__io_8c.html#a9a17e524f514d03929fcb2670e3fa06e">INVERTER1_IN_INPORT</a>&nbsp;&nbsp;&nbsp;UART_IO_UTIL_INPORT(INVERTER1_IN_PORT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart__io_8c.html#adf05a7930a563ee2506828ef2bbd2d0b">INVERTER1_OUT_OUTPORT</a>&nbsp;&nbsp;&nbsp;UART_IO_UTIL_OUTPORT(UART_IO_TX_OUTPORT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart__io_8c.html#adeef1a18ef21ff333064fb93253a973e">INVERTER1_OUT_DDRPORT</a>&nbsp;&nbsp;&nbsp;UART_IO_UTIL_DDRPORT(UART_IO_TX_OUTPORT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart__io_8c.html#a633b2882a479303e3ebde1fc7415e23d">INVERTER1_OUT_INPORT</a>&nbsp;&nbsp;&nbsp;UART_IO_UTIL_INPORT(UART_IO_TX_OUTPORT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart__io_8c.html#a97776736fd9a0c71fa382dab8c792478">INVERTER1_OUT_PIN</a>&nbsp;&nbsp;&nbsp;UART_IO_TX_OUTPIN</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart__io_8c.html#a3f460ef1b88330e0c44c084f5d8e48b4">INVERTER1_IN_IS_HIGH</a>()&nbsp;&nbsp;&nbsp;bit_is_set(INVERTER1_IN_INPORT,INVERTER1_IN_PIN)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart__io_8c.html#a05e2e5642d1d5b73807611d473bd116d">INVERTER1_OUT_HIGH</a>()&nbsp;&nbsp;&nbsp;INVERTER1_OUT_OUTPORT |= _BV(INVERTER1_OUT_PIN)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart__io_8c.html#a0e10b86f69626e9ce4cdb23398dabf82">INVERTER1_OUT_LOW</a>()&nbsp;&nbsp;&nbsp;INVERTER1_OUT_OUTPORT &amp;= ~_BV(INVERTER1_OUT_PIN)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart__io_8c.html#a5e4aa5d00232b6852a5d992fc8a9d478">UART_IO_BUFFER_SIZE</a>&nbsp;&nbsp;&nbsp;(1&lt;&lt;(UART_IO_BUFFER_SIZE_FACTOR))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart__io_8c.html#a28eb435a91a586ef88f29083fcf73ff0">UART_IO_GET_UBRR_X1</a>(baud)&nbsp;&nbsp;&nbsp;((F_CPU/((baud)*16L))-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart__io_8c.html#a3989032159b11af6d81d6112bc985d36">UART_IO_GET_UBRR_X2</a>(baud)&nbsp;&nbsp;&nbsp;((F_CPU/((baud)*8L))-1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart__io_8c.html#a62634036639f88eece6fbf226b45f84b">BAUD</a>&nbsp;&nbsp;&nbsp;UART_IO_BAUDRATE</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart__io_8c.html#a1ac4291762bc07b651eae702323894fb">SIGNAL</a> (SIG_INTERRUPT1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart__io_8c.html#a385355aaf5ae15bdaa3a7d44f2fb4dae">SIGNAL</a> (SIG_UART_DATA)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">FILE *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart__io_8c.html#ad3958bec837802b46366b1354c8c666c">uart_io_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart__io_8c.html#a9595b1de6a23622037f55c8925b084ab">uart_io_ok_to_powersave</a> (void)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>_ _ _ _ | |__ (_)_ __| | _| | ___ _ __ ___ ___ | '_ \| | '__| |/ / |/ _ \ '__/ __|/ _ \ | |_) | | | | &lt;| | __/ | _ \ __/ |_.__/|_|_| |_|||_|(_)___/|</p>
<p>Initializes the UART a FILE stream and attaches a circular ram buffer so that output is fast.</p>
<p>A software inverter is also assumed to be connected from the UART TX to the INT1 line so that the output can be made compatible with a PC without any external inverter or conversion logic.</p>
<p>Copyright 2007 Jï¿½rgen Birkler <a href="mailto:jorgen.birkler@gmail.com">jorgen.birkler@gmail.com</a> </p>

<p>Definition in file <a class="el" href="uart__io_8c_source.html">uart_io.c</a>.</p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a62634036639f88eece6fbf226b45f84b"></a><!-- doxytag: member="uart_io.c::BAUD" ref="a62634036639f88eece6fbf226b45f84b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BAUD&nbsp;&nbsp;&nbsp;UART_IO_BAUDRATE</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aa0d9ac60fecf4685e2220fb3821515d2"></a><!-- doxytag: member="uart_io.c::INVERTER1_IN_DDRPORT" ref="aa0d9ac60fecf4685e2220fb3821515d2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INVERTER1_IN_DDRPORT&nbsp;&nbsp;&nbsp;UART_IO_UTIL_DDRPORT(INVERTER1_IN_PORT)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="uart__io_8c_source.html#l00050">50</a> of file <a class="el" href="uart__io_8c_source.html">uart_io.c</a>.</p>

</div>
</div>
<a class="anchor" id="a9a17e524f514d03929fcb2670e3fa06e"></a><!-- doxytag: member="uart_io.c::INVERTER1_IN_INPORT" ref="a9a17e524f514d03929fcb2670e3fa06e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INVERTER1_IN_INPORT&nbsp;&nbsp;&nbsp;UART_IO_UTIL_INPORT(INVERTER1_IN_PORT)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="uart__io_8c_source.html#l00051">51</a> of file <a class="el" href="uart__io_8c_source.html">uart_io.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3f460ef1b88330e0c44c084f5d8e48b4"></a><!-- doxytag: member="uart_io.c::INVERTER1_IN_IS_HIGH" ref="a3f460ef1b88330e0c44c084f5d8e48b4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INVERTER1_IN_IS_HIGH</td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;bit_is_set(INVERTER1_IN_INPORT,INVERTER1_IN_PIN)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="uart__io_8c_source.html#l00071">71</a> of file <a class="el" href="uart__io_8c_source.html">uart_io.c</a>.</p>

<p>Referenced by <a class="el" href="uart__io_8c_source.html#l00076">SIGNAL()</a>.</p>

</div>
</div>
<a class="anchor" id="a838fd526e8145e1b438c122593b5dcc5"></a><!-- doxytag: member="uart_io.c::INVERTER1_IN_OUTPORT" ref="a838fd526e8145e1b438c122593b5dcc5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INVERTER1_IN_OUTPORT&nbsp;&nbsp;&nbsp;UART_IO_UTIL_OUTPORT(INVERTER1_IN_PORT)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="uart__io_8c_source.html#l00049">49</a> of file <a class="el" href="uart__io_8c_source.html">uart_io.c</a>.</p>

</div>
</div>
<a class="anchor" id="adeef1a18ef21ff333064fb93253a973e"></a><!-- doxytag: member="uart_io.c::INVERTER1_OUT_DDRPORT" ref="adeef1a18ef21ff333064fb93253a973e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INVERTER1_OUT_DDRPORT&nbsp;&nbsp;&nbsp;UART_IO_UTIL_DDRPORT(UART_IO_TX_OUTPORT)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="uart__io_8c_source.html#l00055">55</a> of file <a class="el" href="uart__io_8c_source.html">uart_io.c</a>.</p>

</div>
</div>
<a class="anchor" id="a05e2e5642d1d5b73807611d473bd116d"></a><!-- doxytag: member="uart_io.c::INVERTER1_OUT_HIGH" ref="a05e2e5642d1d5b73807611d473bd116d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INVERTER1_OUT_HIGH</td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;INVERTER1_OUT_OUTPORT |= _BV(INVERTER1_OUT_PIN)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="uart__io_8c_source.html#l00072">72</a> of file <a class="el" href="uart__io_8c_source.html">uart_io.c</a>.</p>

<p>Referenced by <a class="el" href="uart__io_8c_source.html#l00076">SIGNAL()</a>.</p>

</div>
</div>
<a class="anchor" id="a633b2882a479303e3ebde1fc7415e23d"></a><!-- doxytag: member="uart_io.c::INVERTER1_OUT_INPORT" ref="a633b2882a479303e3ebde1fc7415e23d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INVERTER1_OUT_INPORT&nbsp;&nbsp;&nbsp;UART_IO_UTIL_INPORT(UART_IO_TX_OUTPORT)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="uart__io_8c_source.html#l00056">56</a> of file <a class="el" href="uart__io_8c_source.html">uart_io.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0e10b86f69626e9ce4cdb23398dabf82"></a><!-- doxytag: member="uart_io.c::INVERTER1_OUT_LOW" ref="a0e10b86f69626e9ce4cdb23398dabf82" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INVERTER1_OUT_LOW</td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;INVERTER1_OUT_OUTPORT &amp;= ~_BV(INVERTER1_OUT_PIN)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="uart__io_8c_source.html#l00073">73</a> of file <a class="el" href="uart__io_8c_source.html">uart_io.c</a>.</p>

<p>Referenced by <a class="el" href="uart__io_8c_source.html#l00076">SIGNAL()</a>.</p>

</div>
</div>
<a class="anchor" id="adf05a7930a563ee2506828ef2bbd2d0b"></a><!-- doxytag: member="uart_io.c::INVERTER1_OUT_OUTPORT" ref="adf05a7930a563ee2506828ef2bbd2d0b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INVERTER1_OUT_OUTPORT&nbsp;&nbsp;&nbsp;UART_IO_UTIL_OUTPORT(UART_IO_TX_OUTPORT)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="uart__io_8c_source.html#l00054">54</a> of file <a class="el" href="uart__io_8c_source.html">uart_io.c</a>.</p>

</div>
</div>
<a class="anchor" id="a97776736fd9a0c71fa382dab8c792478"></a><!-- doxytag: member="uart_io.c::INVERTER1_OUT_PIN" ref="a97776736fd9a0c71fa382dab8c792478" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INVERTER1_OUT_PIN&nbsp;&nbsp;&nbsp;UART_IO_TX_OUTPIN</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="uart__io_8c_source.html#l00057">57</a> of file <a class="el" href="uart__io_8c_source.html">uart_io.c</a>.</p>

</div>
</div>
<a class="anchor" id="a5e4aa5d00232b6852a5d992fc8a9d478"></a><!-- doxytag: member="uart_io.c::UART_IO_BUFFER_SIZE" ref="a5e4aa5d00232b6852a5d992fc8a9d478" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UART_IO_BUFFER_SIZE&nbsp;&nbsp;&nbsp;(1&lt;&lt;(UART_IO_BUFFER_SIZE_FACTOR))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="uart__io_8c_source.html#l00100">100</a> of file <a class="el" href="uart__io_8c_source.html">uart_io.c</a>.</p>

<p>Referenced by <a class="el" href="uart__io_8c_source.html#l00137">SIGNAL()</a>.</p>

</div>
</div>
<a class="anchor" id="a20284c1a5cb263456f6f1fc477e858b7"></a><!-- doxytag: member="uart_io.c::UART_IO_CONCAT" ref="a20284c1a5cb263456f6f1fc477e858b7" args="(a, b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UART_IO_CONCAT</td>
          <td>(</td>
          <td class="paramtype">a, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">b&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;a ## b</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="uart__io_8c_source.html#l00031">31</a> of file <a class="el" href="uart__io_8c_source.html">uart_io.c</a>.</p>

</div>
</div>
<a class="anchor" id="a40a2445de01e754477cc88f8158d69e8"></a><!-- doxytag: member="uart_io.c::UART_IO_CONCAT_EXPANDED" ref="a40a2445de01e754477cc88f8158d69e8" args="(a, b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UART_IO_CONCAT_EXPANDED</td>
          <td>(</td>
          <td class="paramtype">a, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">b&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;UART_IO_CONCAT(a, b)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="uart__io_8c_source.html#l00032">32</a> of file <a class="el" href="uart__io_8c_source.html">uart_io.c</a>.</p>

</div>
</div>
<a class="anchor" id="a28eb435a91a586ef88f29083fcf73ff0"></a><!-- doxytag: member="uart_io.c::UART_IO_GET_UBRR_X1" ref="a28eb435a91a586ef88f29083fcf73ff0" args="(baud)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UART_IO_GET_UBRR_X1</td>
          <td>(</td>
          <td class="paramtype">baud&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((F_CPU/((baud)*16L))-1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="uart__io_8c_source.html#l00151">151</a> of file <a class="el" href="uart__io_8c_source.html">uart_io.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3989032159b11af6d81d6112bc985d36"></a><!-- doxytag: member="uart_io.c::UART_IO_GET_UBRR_X2" ref="a3989032159b11af6d81d6112bc985d36" args="(baud)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UART_IO_GET_UBRR_X2</td>
          <td>(</td>
          <td class="paramtype">baud&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((F_CPU/((baud)*8L))-1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="uart__io_8c_source.html#l00152">152</a> of file <a class="el" href="uart__io_8c_source.html">uart_io.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab4ea91b215ac10da636f3f5198a3d5d0"></a><!-- doxytag: member="uart_io.c::UART_IO_UTIL_DDRPORT" ref="ab4ea91b215ac10da636f3f5198a3d5d0" args="(name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UART_IO_UTIL_DDRPORT</td>
          <td>(</td>
          <td class="paramtype">name&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;UART_IO_CONCAT(DDR, name)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="uart__io_8c_source.html#l00036">36</a> of file <a class="el" href="uart__io_8c_source.html">uart_io.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab512a899593e996c5519fdbbf75f3ccf"></a><!-- doxytag: member="uart_io.c::UART_IO_UTIL_INPORT" ref="ab512a899593e996c5519fdbbf75f3ccf" args="(name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UART_IO_UTIL_INPORT</td>
          <td>(</td>
          <td class="paramtype">name&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;UART_IO_CONCAT(PIN, name)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="uart__io_8c_source.html#l00035">35</a> of file <a class="el" href="uart__io_8c_source.html">uart_io.c</a>.</p>

</div>
</div>
<a class="anchor" id="aee801a210ff61e73dda8784c521ae8cc"></a><!-- doxytag: member="uart_io.c::UART_IO_UTIL_OUTPORT" ref="aee801a210ff61e73dda8784c521ae8cc" args="(name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UART_IO_UTIL_OUTPORT</td>
          <td>(</td>
          <td class="paramtype">name&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;UART_IO_CONCAT(PORT, name)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="uart__io_8c_source.html#l00034">34</a> of file <a class="el" href="uart__io_8c_source.html">uart_io.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a385355aaf5ae15bdaa3a7d44f2fb4dae"></a><!-- doxytag: member="uart_io.c::SIGNAL" ref="a385355aaf5ae15bdaa3a7d44f2fb4dae" args="(SIG_UART_DATA)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SIGNAL </td>
          <td>(</td>
          <td class="paramtype">SIG_UART_DATA&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="uart__io_8c_source.html#l00137">137</a> of file <a class="el" href="uart__io_8c_source.html">uart_io.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00138"></a>00138 {
<a name="l00139"></a>00139   <span class="keywordflow">if</span> (uart.<a class="code" href="structuart__t.html#a8e57ef820153b0cb32ca4a40bb497baf">tx</a>.<a class="code" href="structcircular__buffer__t.html#ae86438873d8b2665285d0eaeeb31947f">put</a> == uart.<a class="code" href="structuart__t.html#a8e57ef820153b0cb32ca4a40bb497baf">tx</a>.<a class="code" href="structcircular__buffer__t.html#a43adeada0672d58212664066ff92e39d">get</a>)
<a name="l00140"></a>00140   {
<a name="l00141"></a>00141     UCSRB &amp;= ~_BV(UCSRB); <span class="comment">//Disable interrupt</span>
<a name="l00142"></a>00142   }
<a name="l00143"></a>00143   <span class="keywordflow">else</span> {
<a name="l00144"></a>00144     UDR = uart.<a class="code" href="structuart__t.html#a8e57ef820153b0cb32ca4a40bb497baf">tx</a>.<a class="code" href="structcircular__buffer__t.html#a1addfac1b7a454641f92e044d9568096">buffer</a>[uart.<a class="code" href="structuart__t.html#a8e57ef820153b0cb32ca4a40bb497baf">tx</a>.<a class="code" href="structcircular__buffer__t.html#a43adeada0672d58212664066ff92e39d">get</a>];
<a name="l00145"></a>00145     ++uart.<a class="code" href="structuart__t.html#a8e57ef820153b0cb32ca4a40bb497baf">tx</a>.<a class="code" href="structcircular__buffer__t.html#a43adeada0672d58212664066ff92e39d">get</a>;
<a name="l00146"></a>00146     uart.<a class="code" href="structuart__t.html#a8e57ef820153b0cb32ca4a40bb497baf">tx</a>.<a class="code" href="structcircular__buffer__t.html#a43adeada0672d58212664066ff92e39d">get</a> %= <a class="code" href="uart__io_8c.html#a5e4aa5d00232b6852a5d992fc8a9d478">UART_IO_BUFFER_SIZE</a>;
<a name="l00147"></a>00147   }
<a name="l00148"></a>00148 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1ac4291762bc07b651eae702323894fb"></a><!-- doxytag: member="uart_io.c::SIGNAL" ref="a1ac4291762bc07b651eae702323894fb" args="(SIG_INTERRUPT1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SIGNAL </td>
          <td>(</td>
          <td class="paramtype">SIG_INTERRUPT1&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="uart__io_8c_source.html#l00076">76</a> of file <a class="el" href="uart__io_8c_source.html">uart_io.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00078"></a>00078 {
<a name="l00079"></a>00079   <span class="keywordflow">if</span> (<a class="code" href="uart__io_8c.html#a3f460ef1b88330e0c44c084f5d8e48b4">INVERTER1_IN_IS_HIGH</a>())
<a name="l00080"></a>00080   {
<a name="l00081"></a>00081     <a class="code" href="uart__io_8c.html#a0e10b86f69626e9ce4cdb23398dabf82">INVERTER1_OUT_LOW</a>();
<a name="l00082"></a>00082   }
<a name="l00083"></a>00083   <span class="keywordflow">else</span>
<a name="l00084"></a>00084   {
<a name="l00085"></a>00085     <a class="code" href="uart__io_8c.html#a05e2e5642d1d5b73807611d473bd116d">INVERTER1_OUT_HIGH</a>();
<a name="l00086"></a>00086   }
<a name="l00087"></a>00087   __asm__(<span class="stringliteral">&quot;reti&quot;</span>::);
<a name="l00088"></a>00088 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad3958bec837802b46366b1354c8c666c"></a><!-- doxytag: member="uart_io.c::uart_io_init" ref="ad3958bec837802b46366b1354c8c666c" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FILE* uart_io_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialize the UART, interrupts, pin and software inverter. </p>

<p>Definition at line <a class="el" href="uart__io_8c_source.html#l00172">172</a> of file <a class="el" href="uart__io_8c_source.html">uart_io.c</a>.</p>

<p>Referenced by <a class="el" href="main_8c_source.html#l00501">main()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00173"></a>00173 {
<a name="l00174"></a>00174   uart_io_enable_tx();
<a name="l00175"></a>00175   INVERTER1_ENABLE();
<a name="l00176"></a>00176   <span class="keywordflow">return</span> &amp;uart_file_io;
<a name="l00177"></a>00177 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9595b1de6a23622037f55c8925b084ab"></a><!-- doxytag: member="uart_io.c::uart_io_ok_to_powersave" ref="a9595b1de6a23622037f55c8925b084ab" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char uart_io_ok_to_powersave </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns 1 if ok to disable CPU clock 0 if not</p>
<dl class="note"><dt><b>Note:</b></dt><dd>Not implemented; always return 1 </dd></dl>

<p>Definition at line <a class="el" href="uart__io_8c_source.html#l00179">179</a> of file <a class="el" href="uart__io_8c_source.html">uart_io.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00180"></a>00180 {
<a name="l00181"></a>00181   <span class="keywordflow">return</span> 0;
<a name="l00182"></a>00182 }
</pre></div></p>

</div>
</div>
</div>
<hr class="footer"/><address style="text-align: right;"><small>
Generated on Mon Jun 7 18:44:12 2010 for USB IR HID Device by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen.org</a> 1.6.3</small></address>
</body>
</html>

<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>USB IR HID Device: irrx/irrx_bitlength.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>irrx/irrx_bitlength.c File Reference</h1><code>#include &quot;<a class="el" href="irrx__bitlength_8c_source.html">irrx.h</a>&quot;</code><br/>
<code>#include &lt;inttypes.h&gt;</code><br/>
<code>#include &lt;avr/io.h&gt;</code><br/>
<code>#include &lt;avr/interrupt.h&gt;</code><br/>
<code>#include &lt;avr/pgmspace.h&gt;</code><br/>

<p><a href="irrx__bitlength_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structirrx__settings__t.html">irrx_settings_t</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structirrx__internal__t.html">irrx_internal_t</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Internal stuff.  <a href="structirrx__internal__t.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#a3825b9291b2cebb5aade0c3143789840">IRRX_BITLENGTH_STARTBIT_uS</a>&nbsp;&nbsp;&nbsp;(2400L)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#ada4ccd083f640ae79529a01e22e69f96">IRRX_BITLENGTH_ZERO_uS</a>&nbsp;&nbsp;&nbsp;(1200L)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#ab4efe166752c48dc7054e73dc14d0c8e">IRRX_BITLENGTH_ONE_uS</a>&nbsp;&nbsp;&nbsp;(1800L)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#abd8b29c5e2bfcad6380c76772e66b27f">IRRX_STARTBITS</a>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#a6a17e23c11ed3ed978c9938883328cb6">IRRX_NORMAL_BITS</a>&nbsp;&nbsp;&nbsp;20L</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#a69420b967e577c00f3bd11d28d5a7331">IRRX_RECEIVE_TIMEOUT_uS</a>&nbsp;&nbsp;&nbsp;50000L</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#a465b4743d3621405a4adeedffe968167">IRRX_MSB_FIRST</a>&nbsp;&nbsp;&nbsp;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#a6fcd2f5b60e7176ef61f9b8bfe7c1328">IRRX_LSB_FIRST</a>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#ae2df60b41e53e9bfc0579071132b453b">IRRX_RECEIVE_OK</a>(_irrxbuffer)&nbsp;&nbsp;&nbsp;(1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#a43071ea37b68a930615921eb53a7004a">IRRX_GETCODE</a>(_irrxbuffer)&nbsp;&nbsp;&nbsp;((_irrxbuffer.bitbuffer.sony.addr &lt;&lt; 12) | _irrxbuffer.bitbuffer.sony.command)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#ac9824027f181031f48bd39dbf0369dba">IRRX_TRACE1_</a>(str)&nbsp;&nbsp;&nbsp;(void)0</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">IR receiver is connected to ICP (input capture pin).  <a href="#ac9824027f181031f48bd39dbf0369dba"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#a26c4271829bc1fd452272ae1ab3c5a10">IRRX_TRACE2_</a>(str, p1)&nbsp;&nbsp;&nbsp;(void)0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#a5bcfb837d68ef85e34afde46ff2afc48">IRRX_STATIC_ASSERT</a>(expr)&nbsp;&nbsp;&nbsp;extern char static_assert[ (!!(expr))*2 - 1]</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Causes a compilation error if expression is not true.  <a href="#a5bcfb837d68ef85e34afde46ff2afc48"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#a53a7f4abb6834e1e0456a6848cb05779">IRRX_BIT_COUNT_COMPLETE_MASK</a>&nbsp;&nbsp;&nbsp;0x80</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set in bitcount to indicate that reception is complete.  <a href="#a53a7f4abb6834e1e0456a6848cb05779"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#a0624dc67ec256e0d88d4b22f1329fcd7">TIMER1_CRITICAL_SECTION_ENTER</a>()&nbsp;&nbsp;&nbsp;{ uint8_t saved_sreg = TIMSK; TIMSK &amp;=~ (_BV(TICIE1) | _BV(TOIE1)); {</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enter critical section.  <a href="#a0624dc67ec256e0d88d4b22f1329fcd7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#a3af67f960f527b330dff492d404d5f36">TIMER1_CRITICAL_SECTION_EXIT</a>()&nbsp;&nbsp;&nbsp;} TIMSK = saved_sreg; }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Exit critical section.  <a href="#a3af67f960f527b330dff492d404d5f36"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#aabce4b6a71b76341ecb3a23d12b5b9c8">IRRX_TIMER1_uS_TO_TICKS</a>(_uS)&nbsp;&nbsp;&nbsp;(((_uS) * (F_CPU / 1000000L)) / (64L))</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Init with 1/64 prescaler and input capture enabled.  <a href="#aabce4b6a71b76341ecb3a23d12b5b9c8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#a3112964f7dd3995eadebf5d9638e6aa9">IRRX_TIMER1_ENABLE_INTERRUPTS</a>()&nbsp;&nbsp;&nbsp;TIMSK |= (_BV(TICIE1) | _BV(OCIE1A))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#aa6bdc8c3915d681ac13bbed6223a0d13">IRRX_TIMER1_ENABLE_ICP_RISING_EDGE</a>()&nbsp;&nbsp;&nbsp;{TCCR1B |=_BV(ICES1); TIMSK |= _BV(TICIE1);}</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#a6c26aa365afe752077c61762f87957d6">IRRX_TIMER1_ENABLE_ICP_FALLING_EDGE</a>()&nbsp;&nbsp;&nbsp;{TCCR1B &amp;=~_BV(ICES1); TIMSK |= _BV(TICIE1);}</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#a05873a2582a716afa12608965453b7be">IRRX_TIMER1_DISABLE_ICP</a>()&nbsp;&nbsp;&nbsp;{TIMSK &amp;=~_BV(TICIE1);}</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#a41fa5c3c8cc09e20e4e19c7886439e6c">IRRX_TIMER1_START</a>()&nbsp;&nbsp;&nbsp;TCCR1A = 0;TCCR1B |= _BV(ICNC1) | _BV(CS11) | _BV(CS10)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#a87191a0e0d8211865bafd7c2a71aabde">IRRX_TIMER1_STOP</a>()&nbsp;&nbsp;&nbsp;TCCR1B &amp;= ~ (_BV(CS12)|_BV(CS11)|_BV(CS10)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#a586536122dda723da4f8f47be708637f">IRRX_TIMER1_CLEAR_ICP_FLAG</a>()&nbsp;&nbsp;&nbsp;TIFR |=_BV(ICF1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#a8593f0e4a3d97ab248fb273369b26e82">IRRX_TIMER1_RESET</a>()&nbsp;&nbsp;&nbsp;TCNT1 = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#ac2dbd9ce8416c10ab4043a5a0c749f48">IRRX_RECEIVE_TIMEOUT_TICKS</a>&nbsp;&nbsp;&nbsp;IRRX_TIMER1_uS_TO_TICKS(IRRX_RECEIVE_TIMEOUT_uS)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#a29afbd43d145bbb1b621395900163d85">IRRX_BITLENGTH_TICKS_ZERO</a>&nbsp;&nbsp;&nbsp;IRRX_TIMER1_uS_TO_TICKS(IRRX_BITLENGTH_ZERO_uS)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#af0ad040a69bfbf03079f2ca7472c4153">IRRX_BITLENGTH_TICKS_ONE</a>&nbsp;&nbsp;&nbsp;IRRX_TIMER1_uS_TO_TICKS(IRRX_BITLENGTH_ONE_uS)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#ab18cf235279c0f654aeb59f36d7c9c9d">IRRX_BITLENGTH_TICKS_STARTBIT</a>&nbsp;&nbsp;&nbsp;IRRX_TIMER1_uS_TO_TICKS(IRRX_BITLENGTH_STARTBIT_uS)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#a1f9ef9ee277666a8f7258d341078f7e6">IRRX_BITLENGTH_TICKS_STARTBIT_MIN</a>&nbsp;&nbsp;&nbsp;(IRRX_BITLENGTH_TICKS_STARTBIT * 3 / 4)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#acbf5c0a730d56f097a502a4843b5d60f">IRRX_BITLENGTH_TICKS_STARTBIT_MAX</a>&nbsp;&nbsp;&nbsp;(IRRX_BITLENGTH_TICKS_STARTBIT * 5 / 4)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#a07c8693ce4b3b292b8b6d318e73e0d45">IRRX_BITLENGTH_TICKS_BIT_MIN</a>&nbsp;&nbsp;&nbsp;(IRRX_BITLENGTH_TICKS_ZERO * 3 / 4)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#a523e1390d4554e3536bc1a4a60c5a6a6">IRRX_BITLENGTH_TICKS_BIT_MAX</a>&nbsp;&nbsp;&nbsp;(IRRX_BITLENGTH_TICKS_ONE * 5 / 4)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#a5ebeb224b5f970fcd4ae8969abace1ca">IRRX_BITLENGTH_TICKS_BIT_AVG</a>&nbsp;&nbsp;&nbsp;((IRRX_BITLENGTH_TICKS_ONE + IRRX_BITLENGTH_TICKS_ZERO) / 2)</td></tr>
<tr><td colspan="2"><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#add247c6585c89098fe15da62a7dafcff">irrx_bitcount_t</a></td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <br/>
&nbsp;&nbsp;<a class="el" href="irrx__bitlength_8c.html#a06fc87d81c62e9abb8790b6e5713c55badd005af450210daf67855d5589f35fc4">irrx_bitcount_init</a> =  0, 
<a class="el" href="irrx__bitlength_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba69c721a272bc9bfe58df2e0e79fe11d3">irrx_bitcount_startbit1begin</a> =  irrx_bitcount_init, 
<a class="el" href="irrx__bitlength_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba7c88049bb35e915cab28c8e79e3d8708">irrx_bitcount_startbit1end</a>, 
<a class="el" href="irrx__bitlength_8c.html#a06fc87d81c62e9abb8790b6e5713c55bacc8f49e630bc60d2cccc98c15836b904">irrx_bitcount_startbit2begin</a> =  irrx_bitcount_startbit1begin, 
<br/>
&nbsp;&nbsp;<a class="el" href="irrx__bitlength_8c.html#a06fc87d81c62e9abb8790b6e5713c55bac3198d35413e2c3beeb0a955a5857ebb">irrx_bitcount_startbit2end</a> =  irrx_bitcount_startbit1end, 
<a class="el" href="irrx__bitlength_8c.html#a06fc87d81c62e9abb8790b6e5713c55baa58862998136d936f31906d43a34df56">irrx_bitcount_firstbit</a>, 
<a class="el" href="irrx__bitlength_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba3f5daacebcf87da900dcd02e164e76c6">irrx_bitcount_lastbit</a> =  irrx_bitcount_firstbit + IRRX_NORMAL_BITS
<br/>
 }</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#afa22da70a6851232bed212411e44e8a0">IRRX_STATIC_ASSERT</a> (IRRX_BITLENGTH_TICKS_ZERO&lt; IRRX_BITLENGTH_TICKS_ONE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#aff429702a5bc82bb265b3404708f34db">IRRX_STATIC_ASSERT</a> (IRRX_LSB_FIRST+IRRX_MSB_FIRST==1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#ab7be436189f1bb1f4c9f4727a4bd5c98">IRRX_STATIC_ASSERT</a> (IRRX_BITLENGTH_TICKS_ONE &gt;=10)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#a28bb93959859f73cac51ef28f37bd622">IRRX_STATIC_ASSERT</a> (IRRX_BITLENGTH_TICKS_STARTBIT_MIN &gt;=10)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#a99d5bb50017bc560a74e8cdc9ce67954">IRRX_STATIC_ASSERT</a> (IRRX_RECEIVE_TIMEOUT_TICKS &gt; 100)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#a5cee203a52768c0836e67af91c622edb">IRRX_STATIC_ASSERT</a> (sizeof(irrx_internal.bitbuffer)==sizeof(uint32_t))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#ad39420cdd896dd12c68e36313139d0a5">ISR</a> (TIMER1_COMPA_vect)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#a5da59e05fa5ade4be7c7656aee78291a">ISR</a> (TIMER1_CAPT_vect)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#a67846545c3fb744f6106295133d44586">irrx_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#acefc681e50139ef6fecefc69f99644d8">irrx_power_on</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#a4ff99c843584f89c5f5d78be97a8dff7">irrx_power_off</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="irrx_8h.html#a61660383bded461be19a268349e08fce">irrx_code_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="irrx__bitlength_8c.html#aefd7d3a37ea0c9c112bbb819045fcea4">irrx_getcode</a> (void)</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a53a7f4abb6834e1e0456a6848cb05779"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_BIT_COUNT_COMPLETE_MASK" ref="a53a7f4abb6834e1e0456a6848cb05779" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_BIT_COUNT_COMPLETE_MASK&nbsp;&nbsp;&nbsp;0x80</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set in bitcount to indicate that reception is complete. </p>

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00160">160</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab4efe166752c48dc7054e73dc14d0c8e"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_BITLENGTH_ONE_uS" ref="ab4efe166752c48dc7054e73dc14d0c8e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_BITLENGTH_ONE_uS&nbsp;&nbsp;&nbsp;(1800L)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00108">108</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3825b9291b2cebb5aade0c3143789840"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_BITLENGTH_STARTBIT_uS" ref="a3825b9291b2cebb5aade0c3143789840" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_BITLENGTH_STARTBIT_uS&nbsp;&nbsp;&nbsp;(2400L)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>_ _ ____ ____ ___ ____ _ | | | / ___|| __ ) |_ _|_ __ | _ \ ___ _ __ ___ ___ | |_ ___ | | |  \| _ \ | || '__| | |_) / _ \ '_ ` _ \ / _ \| __/ _ \ | |_| |___) | |_) | | || | | _ &lt; __/ | | | | | (_) | || __/ /|____/|____/ |___|_| |_| |_| |_| |_|/ |</p>
<p>Copyright 2007 J�rgen Birkler <a href="mailto:jorgen.birkler@gmail.com">jorgen.birkler@gmail.com</a> USB HID device for IR receiver License: GNU GPL v2 (see License.txt) or proprietary (contact author)</p>
<p>Bit length IR receiver (Suitable for Nec remotes, Onkyo, Pioneer, Goldstar, and others)</p>
<p>SIG_OCMP1 is triggered on timeout</p>
<p>SIG_INPUT_CAPTURE1 is triggered on each fall (because the signal is inverted) of the output from the IR receiver.</p>
<p>Basic description of function:</p>
<ol type="1">
<li>Wait for startbit</li>
<li>Measure length of start bit</li>
<li>Receive bit; measure length from rise-to-rise; ONE is short pulse ZERO is a long pulse</li>
<li>For NEC there are 32 bits: 8 bit address, 8 bit address inversed, 8 bit command, 8 bit command inversed the transmission length is the same due to the inverted bits</li>
</ol>
<p>Interrupts for one start bit: ________________ ___ ___ ___ ____ __/ / / / / ....</p>
<p>^ ^ ^ ^ ^ ^ | | | | | |</p>
<p>Interrupts for two start bits: ________________ ________________ ___ ___ ___ ____ __/ / / / / / ....</p>
<p>^ ^ ^ ^ ^ ^ ^ | | | | | | |</p>
<p>___ ___ ___ ____________________________________ __/ / / /  ^ ^ ^ bc=1 bc=2 bc=3</p>
<p>Timing diagram:</p>
<ul>
<li>T =420 �s to approx 424 �s in the USA and Canada</li>
<li>T=454 �s to approx 460 �s in Europe and others</li>
<li>The header is 8T high and 8T low</li>
<li>ONE is coded 2T high and 6T low</li>
<li>ZERO is coded 2T high and 2T low</li>
<li>Start bit is 8T high and 8T low break = 6T / 16T * startbit len = 3/8 * startbit len</li>
</ul>
<p>For Panasonic a ONE is roughly 3.6ms and a ZERO 1.8ms</p>
<p>Main resource:</p>
<ul>
<li><a href="http://www.sbprojects.com/knowledge/ir/nec.htm">http://www.sbprojects.com/knowledge/ir/nec.htm</a></li>
</ul>
<p>See for more resources about protocols:</p>
<ul>
<li><a href="http://www.epanorama.net/links/irremote.html">http://www.epanorama.net/links/irremote.html</a></li>
<li><a href="http://www.lirc.org/">http://www.lirc.org/</a></li>
<li><a href="http://www.hifi-remote.com/wasser/">http://www.hifi-remote.com/wasser/</a></li>
<li><a href="http://en.wikipedia.org/wiki/Consumer_IR">http://en.wikipedia.org/wiki/Consumer_IR</a></li>
<li><a href="http://www.ee.washington.edu/circuit_archive/text/ir_decode.txt">http://www.ee.washington.edu/circuit_archive/text/ir_decode.txt</a></li>
<li><a href="http://users.pandora.be/davshomepage/panacode.htm">http://users.pandora.be/davshomepage/panacode.htm</a></li>
<li><a href="http://www.hifi-remote.com/infrared/IR-PWM.shtml">http://www.hifi-remote.com/infrared/IR-PWM.shtml</a></li>
</ul>

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00106">106</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

</div>
</div>
<a class="anchor" id="a5ebeb224b5f970fcd4ae8969abace1ca"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_BITLENGTH_TICKS_BIT_AVG" ref="a5ebeb224b5f970fcd4ae8969abace1ca" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_BITLENGTH_TICKS_BIT_AVG&nbsp;&nbsp;&nbsp;((IRRX_BITLENGTH_TICKS_ONE + IRRX_BITLENGTH_TICKS_ZERO) / 2)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00192">192</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

<p>Referenced by <a class="el" href="irrx__bitlength_8c_source.html#l00306">ISR()</a>.</p>

</div>
</div>
<a class="anchor" id="a523e1390d4554e3536bc1a4a60c5a6a6"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_BITLENGTH_TICKS_BIT_MAX" ref="a523e1390d4554e3536bc1a4a60c5a6a6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_BITLENGTH_TICKS_BIT_MAX&nbsp;&nbsp;&nbsp;(IRRX_BITLENGTH_TICKS_ONE * 5 / 4)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00190">190</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

<p>Referenced by <a class="el" href="irrx__bitlength_8c_source.html#l00306">ISR()</a>.</p>

</div>
</div>
<a class="anchor" id="a07c8693ce4b3b292b8b6d318e73e0d45"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_BITLENGTH_TICKS_BIT_MIN" ref="a07c8693ce4b3b292b8b6d318e73e0d45" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_BITLENGTH_TICKS_BIT_MIN&nbsp;&nbsp;&nbsp;(IRRX_BITLENGTH_TICKS_ZERO * 3 / 4)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00189">189</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

<p>Referenced by <a class="el" href="irrx__bitlength_8c_source.html#l00306">ISR()</a>.</p>

</div>
</div>
<a class="anchor" id="af0ad040a69bfbf03079f2ca7472c4153"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_BITLENGTH_TICKS_ONE" ref="af0ad040a69bfbf03079f2ca7472c4153" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_BITLENGTH_TICKS_ONE&nbsp;&nbsp;&nbsp;IRRX_TIMER1_uS_TO_TICKS(IRRX_BITLENGTH_ONE_uS)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00183">183</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab18cf235279c0f654aeb59f36d7c9c9d"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_BITLENGTH_TICKS_STARTBIT" ref="ab18cf235279c0f654aeb59f36d7c9c9d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_BITLENGTH_TICKS_STARTBIT&nbsp;&nbsp;&nbsp;IRRX_TIMER1_uS_TO_TICKS(IRRX_BITLENGTH_STARTBIT_uS)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00184">184</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

</div>
</div>
<a class="anchor" id="acbf5c0a730d56f097a502a4843b5d60f"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_BITLENGTH_TICKS_STARTBIT_MAX" ref="acbf5c0a730d56f097a502a4843b5d60f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_BITLENGTH_TICKS_STARTBIT_MAX&nbsp;&nbsp;&nbsp;(IRRX_BITLENGTH_TICKS_STARTBIT * 5 / 4)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00187">187</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

<p>Referenced by <a class="el" href="irrx__bitlength_8c_source.html#l00306">ISR()</a>.</p>

</div>
</div>
<a class="anchor" id="a1f9ef9ee277666a8f7258d341078f7e6"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_BITLENGTH_TICKS_STARTBIT_MIN" ref="a1f9ef9ee277666a8f7258d341078f7e6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_BITLENGTH_TICKS_STARTBIT_MIN&nbsp;&nbsp;&nbsp;(IRRX_BITLENGTH_TICKS_STARTBIT * 3 / 4)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00186">186</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

<p>Referenced by <a class="el" href="irrx__bitlength_8c_source.html#l00306">ISR()</a>.</p>

</div>
</div>
<a class="anchor" id="a29afbd43d145bbb1b621395900163d85"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_BITLENGTH_TICKS_ZERO" ref="a29afbd43d145bbb1b621395900163d85" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_BITLENGTH_TICKS_ZERO&nbsp;&nbsp;&nbsp;IRRX_TIMER1_uS_TO_TICKS(IRRX_BITLENGTH_ZERO_uS)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00182">182</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

</div>
</div>
<a class="anchor" id="ada4ccd083f640ae79529a01e22e69f96"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_BITLENGTH_ZERO_uS" ref="ada4ccd083f640ae79529a01e22e69f96" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_BITLENGTH_ZERO_uS&nbsp;&nbsp;&nbsp;(1200L)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00107">107</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

</div>
</div>
<a class="anchor" id="a43071ea37b68a930615921eb53a7004a"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_GETCODE" ref="a43071ea37b68a930615921eb53a7004a" args="(_irrxbuffer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_GETCODE</td>
          <td>(</td>
          <td class="paramtype">_irrxbuffer&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((_irrxbuffer.bitbuffer.sony.addr &lt;&lt; 12) | _irrxbuffer.bitbuffer.sony.command)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00116">116</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

<p>Referenced by <a class="el" href="irrx__bitlength_8c_source.html#l00306">ISR()</a>.</p>

</div>
</div>
<a class="anchor" id="a6fcd2f5b60e7176ef61f9b8bfe7c1328"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_LSB_FIRST" ref="a6fcd2f5b60e7176ef61f9b8bfe7c1328" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_LSB_FIRST&nbsp;&nbsp;&nbsp;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00113">113</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

<p>Referenced by <a class="el" href="irrx__bitlength_8c_source.html#l00306">ISR()</a>.</p>

</div>
</div>
<a class="anchor" id="a465b4743d3621405a4adeedffe968167"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_MSB_FIRST" ref="a465b4743d3621405a4adeedffe968167" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_MSB_FIRST&nbsp;&nbsp;&nbsp;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00112">112</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

<p>Referenced by <a class="el" href="irrx__bitlength_8c_source.html#l00306">ISR()</a>.</p>

</div>
</div>
<a class="anchor" id="a6a17e23c11ed3ed978c9938883328cb6"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_NORMAL_BITS" ref="a6a17e23c11ed3ed978c9938883328cb6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_NORMAL_BITS&nbsp;&nbsp;&nbsp;20L</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00110">110</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

<p>Referenced by <a class="el" href="irrx__bitlength_8c_source.html#l00306">ISR()</a>.</p>

</div>
</div>
<a class="anchor" id="ae2df60b41e53e9bfc0579071132b453b"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_RECEIVE_OK" ref="ae2df60b41e53e9bfc0579071132b453b" args="(_irrxbuffer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_RECEIVE_OK</td>
          <td>(</td>
          <td class="paramtype">_irrxbuffer&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00115">115</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

<p>Referenced by <a class="el" href="irrx__bitlength_8c_source.html#l00306">ISR()</a>.</p>

</div>
</div>
<a class="anchor" id="ac2dbd9ce8416c10ab4043a5a0c749f48"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_RECEIVE_TIMEOUT_TICKS" ref="ac2dbd9ce8416c10ab4043a5a0c749f48" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_RECEIVE_TIMEOUT_TICKS&nbsp;&nbsp;&nbsp;IRRX_TIMER1_uS_TO_TICKS(IRRX_RECEIVE_TIMEOUT_uS)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00180">180</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

<p>Referenced by <a class="el" href="irrx__bitlength_8c_source.html#l00306">ISR()</a>.</p>

</div>
</div>
<a class="anchor" id="a69420b967e577c00f3bd11d28d5a7331"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_RECEIVE_TIMEOUT_uS" ref="a69420b967e577c00f3bd11d28d5a7331" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_RECEIVE_TIMEOUT_uS&nbsp;&nbsp;&nbsp;50000L</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00111">111</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

</div>
</div>
<a class="anchor" id="abd8b29c5e2bfcad6380c76772e66b27f"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_STARTBITS" ref="abd8b29c5e2bfcad6380c76772e66b27f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_STARTBITS&nbsp;&nbsp;&nbsp;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00109">109</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

</div>
</div>
<a class="anchor" id="a5bcfb837d68ef85e34afde46ff2afc48"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_STATIC_ASSERT" ref="a5bcfb837d68ef85e34afde46ff2afc48" args="(expr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_STATIC_ASSERT</td>
          <td>(</td>
          <td class="paramtype">expr&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;extern char static_assert[ (!!(expr))*2 - 1]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Causes a compilation error if expression is not true. </p>

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00157">157</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

</div>
</div>
<a class="anchor" id="a586536122dda723da4f8f47be708637f"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_TIMER1_CLEAR_ICP_FLAG" ref="a586536122dda723da4f8f47be708637f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_TIMER1_CLEAR_ICP_FLAG</td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;TIFR |=_BV(ICF1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00177">177</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

<p>Referenced by <a class="el" href="irrx__bitlength_8c_source.html#l00306">ISR()</a>.</p>

</div>
</div>
<a class="anchor" id="a05873a2582a716afa12608965453b7be"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_TIMER1_DISABLE_ICP" ref="a05873a2582a716afa12608965453b7be" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_TIMER1_DISABLE_ICP</td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;{TIMSK &amp;=~_BV(TICIE1);}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00173">173</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

</div>
</div>
<a class="anchor" id="a6c26aa365afe752077c61762f87957d6"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_TIMER1_ENABLE_ICP_FALLING_EDGE" ref="a6c26aa365afe752077c61762f87957d6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_TIMER1_ENABLE_ICP_FALLING_EDGE</td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;{TCCR1B &amp;=~_BV(ICES1); TIMSK |= _BV(TICIE1);}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00172">172</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

<p>Referenced by <a class="el" href="irrx__bitlength_8c_source.html#l00402">irrx_power_on()</a>, and <a class="el" href="irrx__bitlength_8c_source.html#l00293">ISR()</a>.</p>

</div>
</div>
<a class="anchor" id="aa6bdc8c3915d681ac13bbed6223a0d13"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_TIMER1_ENABLE_ICP_RISING_EDGE" ref="aa6bdc8c3915d681ac13bbed6223a0d13" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_TIMER1_ENABLE_ICP_RISING_EDGE</td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;{TCCR1B |=_BV(ICES1); TIMSK |= _BV(TICIE1);}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00171">171</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

<p>Referenced by <a class="el" href="irrx__bitlength_8c_source.html#l00306">ISR()</a>.</p>

</div>
</div>
<a class="anchor" id="a3112964f7dd3995eadebf5d9638e6aa9"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_TIMER1_ENABLE_INTERRUPTS" ref="a3112964f7dd3995eadebf5d9638e6aa9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_TIMER1_ENABLE_INTERRUPTS</td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;TIMSK |= (_BV(TICIE1) | _BV(OCIE1A))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00170">170</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

<p>Referenced by <a class="el" href="irrx__bitlength_8c_source.html#l00402">irrx_power_on()</a>.</p>

</div>
</div>
<a class="anchor" id="a8593f0e4a3d97ab248fb273369b26e82"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_TIMER1_RESET" ref="a8593f0e4a3d97ab248fb273369b26e82" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_TIMER1_RESET</td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;TCNT1 = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00178">178</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

<p>Referenced by <a class="el" href="irrx__bitlength_8c_source.html#l00306">ISR()</a>.</p>

</div>
</div>
<a class="anchor" id="a41fa5c3c8cc09e20e4e19c7886439e6c"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_TIMER1_START" ref="a41fa5c3c8cc09e20e4e19c7886439e6c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_TIMER1_START</td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;TCCR1A = 0;TCCR1B |= _BV(ICNC1) | _BV(CS11) | _BV(CS10)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00175">175</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

<p>Referenced by <a class="el" href="irrx__bitlength_8c_source.html#l00402">irrx_power_on()</a>.</p>

</div>
</div>
<a class="anchor" id="a87191a0e0d8211865bafd7c2a71aabde"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_TIMER1_STOP" ref="a87191a0e0d8211865bafd7c2a71aabde" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_TIMER1_STOP</td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;TCCR1B &amp;= ~ (_BV(CS12)|_BV(CS11)|_BV(CS10)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00176">176</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

</div>
</div>
<a class="anchor" id="aabce4b6a71b76341ecb3a23d12b5b9c8"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_TIMER1_uS_TO_TICKS" ref="aabce4b6a71b76341ecb3a23d12b5b9c8" args="(_uS)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_TIMER1_uS_TO_TICKS</td>
          <td>(</td>
          <td class="paramtype">_uS&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(((_uS) * (F_CPU / 1000000L)) / (64L))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Init with 1/64 prescaler and input capture enabled. </p>

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00169">169</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac9824027f181031f48bd39dbf0369dba"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_TRACE1_" ref="ac9824027f181031f48bd39dbf0369dba" args="(str)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_TRACE1_</td>
          <td>(</td>
          <td class="paramtype">str&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(void)0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>IR receiver is connected to ICP (input capture pin). </p>

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00152">152</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

<p>Referenced by <a class="el" href="irrx__bitlength_8c_source.html#l00293">ISR()</a>.</p>

</div>
</div>
<a class="anchor" id="a26c4271829bc1fd452272ae1ab3c5a10"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_TRACE2_" ref="a26c4271829bc1fd452272ae1ab3c5a10" args="(str, p1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRRX_TRACE2_</td>
          <td>(</td>
          <td class="paramtype">str, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p1&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(void)0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00153">153</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0624dc67ec256e0d88d4b22f1329fcd7"></a><!-- doxytag: member="irrx_bitlength.c::TIMER1_CRITICAL_SECTION_ENTER" ref="a0624dc67ec256e0d88d4b22f1329fcd7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMER1_CRITICAL_SECTION_ENTER</td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;{ uint8_t saved_sreg = TIMSK; TIMSK &amp;=~ (_BV(TICIE1) | _BV(TOIE1)); {</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enter critical section. </p>

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00163">163</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

<p>Referenced by <a class="el" href="irrx__bitlength_8c_source.html#l00418">irrx_getcode()</a>.</p>

</div>
</div>
<a class="anchor" id="a3af67f960f527b330dff492d404d5f36"></a><!-- doxytag: member="irrx_bitlength.c::TIMER1_CRITICAL_SECTION_EXIT" ref="a3af67f960f527b330dff492d404d5f36" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMER1_CRITICAL_SECTION_EXIT</td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;} TIMSK = saved_sreg; }</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Exit critical section. </p>

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00166">166</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

<p>Referenced by <a class="el" href="irrx__bitlength_8c_source.html#l00418">irrx_getcode()</a>.</p>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="add247c6585c89098fe15da62a7dafcff"></a><!-- doxytag: member="irrx_bitlength.c::irrx_bitcount_t" ref="add247c6585c89098fe15da62a7dafcff" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint8_t <a class="el" href="irrx__bitlength_8c.html#add247c6585c89098fe15da62a7dafcff">irrx_bitcount_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00256">256</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="a06fc87d81c62e9abb8790b6e5713c55b"></a><!-- doxytag: member="irrx_bitlength.c::@0" ref="a06fc87d81c62e9abb8790b6e5713c55b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a06fc87d81c62e9abb8790b6e5713c55badd005af450210daf67855d5589f35fc4"></a><!-- doxytag: member="irrx_bitcount_init" ref="a06fc87d81c62e9abb8790b6e5713c55badd005af450210daf67855d5589f35fc4" args="" -->irrx_bitcount_init</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a06fc87d81c62e9abb8790b6e5713c55ba69c721a272bc9bfe58df2e0e79fe11d3"></a><!-- doxytag: member="irrx_bitcount_startbit1begin" ref="a06fc87d81c62e9abb8790b6e5713c55ba69c721a272bc9bfe58df2e0e79fe11d3" args="" -->irrx_bitcount_startbit1begin</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a06fc87d81c62e9abb8790b6e5713c55ba7c88049bb35e915cab28c8e79e3d8708"></a><!-- doxytag: member="irrx_bitcount_startbit1end" ref="a06fc87d81c62e9abb8790b6e5713c55ba7c88049bb35e915cab28c8e79e3d8708" args="" -->irrx_bitcount_startbit1end</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a06fc87d81c62e9abb8790b6e5713c55bacc8f49e630bc60d2cccc98c15836b904"></a><!-- doxytag: member="irrx_bitcount_startbit2begin" ref="a06fc87d81c62e9abb8790b6e5713c55bacc8f49e630bc60d2cccc98c15836b904" args="" -->irrx_bitcount_startbit2begin</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a06fc87d81c62e9abb8790b6e5713c55bac3198d35413e2c3beeb0a955a5857ebb"></a><!-- doxytag: member="irrx_bitcount_startbit2end" ref="a06fc87d81c62e9abb8790b6e5713c55bac3198d35413e2c3beeb0a955a5857ebb" args="" -->irrx_bitcount_startbit2end</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a06fc87d81c62e9abb8790b6e5713c55baa58862998136d936f31906d43a34df56"></a><!-- doxytag: member="irrx_bitcount_firstbit" ref="a06fc87d81c62e9abb8790b6e5713c55baa58862998136d936f31906d43a34df56" args="" -->irrx_bitcount_firstbit</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a06fc87d81c62e9abb8790b6e5713c55ba3f5daacebcf87da900dcd02e164e76c6"></a><!-- doxytag: member="irrx_bitcount_lastbit" ref="a06fc87d81c62e9abb8790b6e5713c55ba3f5daacebcf87da900dcd02e164e76c6" args="" -->irrx_bitcount_lastbit</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00241">241</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00242"></a>00242 {
<a name="l00243"></a>00243   <a class="code" href="irrx__bitlength_8c.html#a06fc87d81c62e9abb8790b6e5713c55badd005af450210daf67855d5589f35fc4">irrx_bitcount_init</a> = 0,
<a name="l00244"></a>00244   <a class="code" href="irrx__bitlength_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba69c721a272bc9bfe58df2e0e79fe11d3">irrx_bitcount_startbit1begin</a> = <a class="code" href="irrx__bitlength_8c.html#a06fc87d81c62e9abb8790b6e5713c55badd005af450210daf67855d5589f35fc4">irrx_bitcount_init</a>,
<a name="l00245"></a>00245   <a class="code" href="irrx__bitlength_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba7c88049bb35e915cab28c8e79e3d8708">irrx_bitcount_startbit1end</a>,
<a name="l00246"></a>00246 <span class="preprocessor">#if IRRX_STARTBITS == 1</span>
<a name="l00247"></a>00247 <span class="preprocessor"></span>  <a class="code" href="irrx__bitlength_8c.html#a06fc87d81c62e9abb8790b6e5713c55bacc8f49e630bc60d2cccc98c15836b904">irrx_bitcount_startbit2begin</a> = <a class="code" href="irrx__bitlength_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba69c721a272bc9bfe58df2e0e79fe11d3">irrx_bitcount_startbit1begin</a>,
<a name="l00248"></a>00248   <a class="code" href="irrx__bitlength_8c.html#a06fc87d81c62e9abb8790b6e5713c55bac3198d35413e2c3beeb0a955a5857ebb">irrx_bitcount_startbit2end</a> = irrx_bitcount_startbit1end,
<a name="l00249"></a>00249 <span class="preprocessor">#elif IRRX_STARTBITS == 2</span>
<a name="l00250"></a>00250 <span class="preprocessor"></span>  irrx_bitcount_startbit2begin,
<a name="l00251"></a>00251   irrx_bitcount_startbit2end,
<a name="l00252"></a>00252 <span class="preprocessor">#endif</span>
<a name="l00253"></a>00253 <span class="preprocessor"></span>  <a class="code" href="irrx__bitlength_8c.html#a06fc87d81c62e9abb8790b6e5713c55baa58862998136d936f31906d43a34df56">irrx_bitcount_firstbit</a>,
<a name="l00254"></a>00254   <a class="code" href="irrx__bitlength_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba3f5daacebcf87da900dcd02e164e76c6">irrx_bitcount_lastbit</a> = irrx_bitcount_firstbit + <a class="code" href="irrx__bitlength_8c.html#a6a17e23c11ed3ed978c9938883328cb6">IRRX_NORMAL_BITS</a>
<a name="l00255"></a>00255 };
</pre></div></p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="aefd7d3a37ea0c9c112bbb819045fcea4"></a><!-- doxytag: member="irrx_bitlength.c::irrx_getcode" ref="aefd7d3a37ea0c9c112bbb819045fcea4" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="irrx_8h.html#a61660383bded461be19a268349e08fce">irrx_code_t</a> irrx_getcode </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get received ir code  Ircode Ir code received </p>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>IRRX_NO_CODE</em>&nbsp;</td><td>if not ir code received </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00418">418</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

<p>Referenced by <a class="el" href="main_8c_source.html#l00501">main()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00419"></a>00419 {
<a name="l00420"></a>00420   <a class="code" href="irrx_8h.html#a61660383bded461be19a268349e08fce">irrx_code_t</a> result;
<a name="l00421"></a>00421   <a class="code" href="irrx__bitlength_8c.html#a0624dc67ec256e0d88d4b22f1329fcd7" title="Enter critical section.">TIMER1_CRITICAL_SECTION_ENTER</a>()
<a name="l00422"></a>00422   result = irrx_receivebuffer;
<a name="l00423"></a>00423   <a class="code" href="irrx__bitlength_8c.html#a3af67f960f527b330dff492d404d5f36" title="Exit critical section.">TIMER1_CRITICAL_SECTION_EXIT</a>()
<a name="l00424"></a>00424   return result;
<a name="l00425"></a>00425 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a67846545c3fb744f6106295133d44586"></a><!-- doxytag: member="irrx_bitlength.c::irrx_init" ref="a67846545c3fb744f6106295133d44586" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void irrx_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialize hardware ports for ir receiver. Call once during reset </p>

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00396">396</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

<p>Referenced by <a class="el" href="main_8c_source.html#l00501">main()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00397"></a>00397 {
<a name="l00398"></a>00398   IRRX_INIT_PORTS();
<a name="l00399"></a>00399   IRRX_POWER_OFF();
<a name="l00400"></a>00400 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4ff99c843584f89c5f5d78be97a8dff7"></a><!-- doxytag: member="irrx_bitlength.c::irrx_power_off" ref="a4ff99c843584f89c5f5d78be97a8dff7" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void irrx_power_off </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Disables power to the ir receiver and disables interrupts </p>

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00412">412</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00413"></a>00413 {
<a name="l00414"></a>00414   irrx_receivebuffer = <a class="code" href="irrx_8h.html#a9b37b956410016c9791cd56b63666f1f" title="No code received.">IRRX_NO_CODE</a>;
<a name="l00415"></a>00415   IRRX_POWER_OFF();
<a name="l00416"></a>00416 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="acefc681e50139ef6fecefc69f99644d8"></a><!-- doxytag: member="irrx_bitlength.c::irrx_power_on" ref="acefc681e50139ef6fecefc69f99644d8" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void irrx_power_on </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Start reception of ir codes by giving power to ir receiver and init timers and interrupts </p>

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00402">402</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

<p>Referenced by <a class="el" href="main_8c_source.html#l00501">main()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00403"></a>00403 {
<a name="l00404"></a>00404   irrx_internal.<a class="code" href="structirrx__internal__t.html#a3cdea5c22bc54a97502f2c7804864b4a" title="counted bits">bitcount</a> = <a class="code" href="irrx__bitlength_8c.html#a06fc87d81c62e9abb8790b6e5713c55badd005af450210daf67855d5589f35fc4">irrx_bitcount_init</a>;
<a name="l00405"></a>00405   irrx_receivebuffer = <a class="code" href="irrx_8h.html#a9b37b956410016c9791cd56b63666f1f" title="No code received.">IRRX_NO_CODE</a>;
<a name="l00406"></a>00406   IRRX_POWER_ON();
<a name="l00407"></a>00407   <a class="code" href="irrx__bitlength_8c.html#a41fa5c3c8cc09e20e4e19c7886439e6c">IRRX_TIMER1_START</a>();
<a name="l00408"></a>00408   <a class="code" href="irrx__bitlength_8c.html#a3112964f7dd3995eadebf5d9638e6aa9">IRRX_TIMER1_ENABLE_INTERRUPTS</a>();
<a name="l00409"></a>00409   <a class="code" href="irrx__bitlength_8c.html#a6c26aa365afe752077c61762f87957d6">IRRX_TIMER1_ENABLE_ICP_FALLING_EDGE</a>();
<a name="l00410"></a>00410 } 
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5cee203a52768c0836e67af91c622edb"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_STATIC_ASSERT" ref="a5cee203a52768c0836e67af91c622edb" args="(sizeof(irrx_internal.bitbuffer)==sizeof(uint32_t))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IRRX_STATIC_ASSERT </td>
          <td>(</td>
          <td class="paramtype">sizeof(irrx_internal.bitbuffer)&nbsp;</td>
          <td class="paramname"> = <code>=sizeof(uint32_t)</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a99d5bb50017bc560a74e8cdc9ce67954"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_STATIC_ASSERT" ref="a99d5bb50017bc560a74e8cdc9ce67954" args="(IRRX_RECEIVE_TIMEOUT_TICKS &gt; 100)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IRRX_STATIC_ASSERT </td>
          <td>(</td>
          <td class="paramtype">IRRX_RECEIVE_TIMEOUT_TICKS&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">100&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a28bb93959859f73cac51ef28f37bd622"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_STATIC_ASSERT" ref="a28bb93959859f73cac51ef28f37bd622" args="(IRRX_BITLENGTH_TICKS_STARTBIT_MIN &gt;=10)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IRRX_STATIC_ASSERT </td>
          <td>(</td>
          <td class="paramtype">IRRX_BITLENGTH_TICKS_STARTBIT_MIN &gt;=&nbsp;</td>
          <td class="paramname"> <em>10</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab7be436189f1bb1f4c9f4727a4bd5c98"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_STATIC_ASSERT" ref="ab7be436189f1bb1f4c9f4727a4bd5c98" args="(IRRX_BITLENGTH_TICKS_ONE &gt;=10)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IRRX_STATIC_ASSERT </td>
          <td>(</td>
          <td class="paramtype">IRRX_BITLENGTH_TICKS_ONE &gt;=&nbsp;</td>
          <td class="paramname"> <em>10</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aff429702a5bc82bb265b3404708f34db"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_STATIC_ASSERT" ref="aff429702a5bc82bb265b3404708f34db" args="(IRRX_LSB_FIRST+IRRX_MSB_FIRST==1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IRRX_STATIC_ASSERT </td>
          <td>(</td>
          <td class="paramtype">IRRX_LSB_FIRST+&nbsp;</td>
          <td class="paramname"> <em>IRRX_MSB_FIRST</em> = <code>=1</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="afa22da70a6851232bed212411e44e8a0"></a><!-- doxytag: member="irrx_bitlength.c::IRRX_STATIC_ASSERT" ref="afa22da70a6851232bed212411e44e8a0" args="(IRRX_BITLENGTH_TICKS_ZERO&lt; IRRX_BITLENGTH_TICKS_ONE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IRRX_STATIC_ASSERT </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a5da59e05fa5ade4be7c7656aee78291a"></a><!-- doxytag: member="irrx_bitlength.c::ISR" ref="a5da59e05fa5ade4be7c7656aee78291a" args="(TIMER1_CAPT_vect)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ISR </td>
          <td>(</td>
          <td class="paramtype">TIMER1_CAPT_vect&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00306">306</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00307"></a>00307 {
<a name="l00308"></a>00308   uint16_t icr = ICR1;
<a name="l00309"></a>00309   <a class="code" href="irrx__bitlength_8c.html#a8593f0e4a3d97ab248fb273369b26e82">IRRX_TIMER1_RESET</a>();
<a name="l00310"></a>00310   <a class="code" href="irrx__bitlength_8c.html#a586536122dda723da4f8f47be708637f">IRRX_TIMER1_CLEAR_ICP_FLAG</a>();
<a name="l00311"></a>00311   <span class="comment">//IRRX_TRACE2_(&quot;%d&quot;,icr);</span>
<a name="l00312"></a>00312   <span class="comment">//Set timeout ticks for the end of reception (will trigger) </span>
<a name="l00313"></a>00313   OCR1A = <a class="code" href="irrx__bitlength_8c.html#ac2dbd9ce8416c10ab4043a5a0c749f48">IRRX_RECEIVE_TIMEOUT_TICKS</a>;
<a name="l00314"></a>00314   <span class="keywordflow">if</span> (irrx_internal.<a class="code" href="structirrx__internal__t.html#a3cdea5c22bc54a97502f2c7804864b4a" title="counted bits">bitcount</a> == <a class="code" href="irrx__bitlength_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba69c721a272bc9bfe58df2e0e79fe11d3">irrx_bitcount_startbit1begin</a> || 
<a name="l00315"></a>00315     irrx_internal.<a class="code" href="structirrx__internal__t.html#a3cdea5c22bc54a97502f2c7804864b4a" title="counted bits">bitcount</a> == <a class="code" href="irrx__bitlength_8c.html#a06fc87d81c62e9abb8790b6e5713c55bacc8f49e630bc60d2cccc98c15836b904">irrx_bitcount_startbit2begin</a>)
<a name="l00316"></a>00316   {
<a name="l00317"></a>00317     <span class="comment">//Set interrupt to detect rest of bits bit (rising edge because signal is inverted)</span>
<a name="l00318"></a>00318     <a class="code" href="irrx__bitlength_8c.html#aa6bdc8c3915d681ac13bbed6223a0d13">IRRX_TIMER1_ENABLE_ICP_RISING_EDGE</a>();
<a name="l00319"></a>00319     <a class="code" href="irrx__bitlength_8c.html#ac9824027f181031f48bd39dbf0369dba" title="IR receiver is connected to ICP (input capture pin).">IRRX_TRACE1_</a>(<span class="stringliteral">&quot;A&quot;</span>);
<a name="l00320"></a>00320     irrx_internal.<a class="code" href="structirrx__internal__t.html#a3cdea5c22bc54a97502f2c7804864b4a" title="counted bits">bitcount</a>++;
<a name="l00321"></a>00321     <span class="keywordflow">return</span>;
<a name="l00322"></a>00322   }
<a name="l00323"></a>00323   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (irrx_internal.<a class="code" href="structirrx__internal__t.html#a3cdea5c22bc54a97502f2c7804864b4a" title="counted bits">bitcount</a> == <a class="code" href="irrx__bitlength_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba7c88049bb35e915cab28c8e79e3d8708">irrx_bitcount_startbit1end</a> || 
<a name="l00324"></a>00324       irrx_internal.<a class="code" href="structirrx__internal__t.html#a3cdea5c22bc54a97502f2c7804864b4a" title="counted bits">bitcount</a> == <a class="code" href="irrx__bitlength_8c.html#a06fc87d81c62e9abb8790b6e5713c55bac3198d35413e2c3beeb0a955a5857ebb">irrx_bitcount_startbit2end</a>)
<a name="l00325"></a>00325   {
<a name="l00326"></a>00326     <a class="code" href="irrx__bitlength_8c.html#a6c26aa365afe752077c61762f87957d6">IRRX_TIMER1_ENABLE_ICP_FALLING_EDGE</a>();
<a name="l00327"></a>00327     <span class="keywordflow">if</span> (<a class="code" href="irrx__bitlength_8c.html#a1f9ef9ee277666a8f7258d341078f7e6">IRRX_BITLENGTH_TICKS_STARTBIT_MIN</a> &lt; icr &amp;&amp; icr &lt; <a class="code" href="irrx__bitlength_8c.html#acbf5c0a730d56f097a502a4843b5d60f">IRRX_BITLENGTH_TICKS_STARTBIT_MAX</a>)
<a name="l00328"></a>00328     {
<a name="l00329"></a>00329       <a class="code" href="irrx__bitlength_8c.html#ac9824027f181031f48bd39dbf0369dba" title="IR receiver is connected to ICP (input capture pin).">IRRX_TRACE1_</a>(<span class="stringliteral">&quot;B&quot;</span>);
<a name="l00330"></a>00330       irrx_receivebuffer = <a class="code" href="irrx_8h.html#a9b37b956410016c9791cd56b63666f1f" title="No code received.">IRRX_NO_CODE</a>;
<a name="l00331"></a>00331       irrx_internal.<a class="code" href="structirrx__internal__t.html#a3cdea5c22bc54a97502f2c7804864b4a" title="counted bits">bitcount</a>++;
<a name="l00332"></a>00332       <span class="keywordflow">return</span>;
<a name="l00333"></a>00333     }
<a name="l00334"></a>00334   }
<a name="l00335"></a>00335   <span class="keywordflow">else</span> {
<a name="l00336"></a>00336     <span class="comment">//Within a valid range?</span>
<a name="l00337"></a>00337     <span class="keywordflow">if</span> (<a class="code" href="irrx__bitlength_8c.html#a07c8693ce4b3b292b8b6d318e73e0d45">IRRX_BITLENGTH_TICKS_BIT_MIN</a> &lt; icr &amp;&amp; icr &lt; <a class="code" href="irrx__bitlength_8c.html#a523e1390d4554e3536bc1a4a60c5a6a6">IRRX_BITLENGTH_TICKS_BIT_MAX</a>)
<a name="l00338"></a>00338     {
<a name="l00339"></a>00339       irrx_internal.<a class="code" href="structirrx__internal__t.html#a3cdea5c22bc54a97502f2c7804864b4a" title="counted bits">bitcount</a>++;
<a name="l00340"></a>00340 
<a name="l00341"></a>00341       <span class="keywordflow">if</span> (<a class="code" href="irrx__bitlength_8c.html#a6fcd2f5b60e7176ef61f9b8bfe7c1328">IRRX_LSB_FIRST</a>) {       
<a name="l00342"></a>00342         irrx_internal.<a class="code" href="structirrx__internal__t.html#abf58a5beeb93cc61ddded05d15b6e4a9">bitbuffer</a>.<a class="code" href="structirrx__internal__t.html#a07bc54edf80539360b9d94d2cf050d70">all</a> &gt;&gt;= 1; <span class="comment">//Make room for new bit</span>
<a name="l00343"></a>00343       }
<a name="l00344"></a>00344       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="irrx__bitlength_8c.html#a465b4743d3621405a4adeedffe968167">IRRX_MSB_FIRST</a>) {
<a name="l00345"></a>00345         irrx_internal.<a class="code" href="structirrx__internal__t.html#abf58a5beeb93cc61ddded05d15b6e4a9">bitbuffer</a>.<a class="code" href="structirrx__internal__t.html#a07bc54edf80539360b9d94d2cf050d70">all</a> &lt;&lt;= 1; <span class="comment">//Make room for new bit</span>
<a name="l00346"></a>00346       }
<a name="l00347"></a>00347       
<a name="l00348"></a>00348 
<a name="l00349"></a>00349       <span class="comment">//0 or 1?</span>
<a name="l00350"></a>00350       <span class="keywordflow">if</span> (icr &gt; <a class="code" href="irrx__bitlength_8c.html#a5ebeb224b5f970fcd4ae8969abace1ca">IRRX_BITLENGTH_TICKS_BIT_AVG</a>)
<a name="l00351"></a>00351       {
<a name="l00352"></a>00352         <span class="keywordflow">if</span> (<a class="code" href="irrx__bitlength_8c.html#a6fcd2f5b60e7176ef61f9b8bfe7c1328">IRRX_LSB_FIRST</a>) {       
<a name="l00353"></a>00353           irrx_internal.<a class="code" href="structirrx__internal__t.html#abf58a5beeb93cc61ddded05d15b6e4a9">bitbuffer</a>.<a class="code" href="structirrx__internal__t.html#a07bc54edf80539360b9d94d2cf050d70">all</a> |= ((uint32_t)1L &lt;&lt; (uint32_t)<a class="code" href="irrx__bitlength_8c.html#a6a17e23c11ed3ed978c9938883328cb6">IRRX_NORMAL_BITS</a>);
<a name="l00354"></a>00354         }
<a name="l00355"></a>00355         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="irrx__bitlength_8c.html#a465b4743d3621405a4adeedffe968167">IRRX_MSB_FIRST</a>) {
<a name="l00356"></a>00356           irrx_internal.<a class="code" href="structirrx__internal__t.html#abf58a5beeb93cc61ddded05d15b6e4a9">bitbuffer</a>.<a class="code" href="structirrx__internal__t.html#a07bc54edf80539360b9d94d2cf050d70">all</a> |= 1;
<a name="l00357"></a>00357         }
<a name="l00358"></a>00358         <a class="code" href="irrx__bitlength_8c.html#ac9824027f181031f48bd39dbf0369dba" title="IR receiver is connected to ICP (input capture pin).">IRRX_TRACE1_</a>(<span class="stringliteral">&quot;x&quot;</span>);
<a name="l00359"></a>00359       }
<a name="l00360"></a>00360       <span class="keywordflow">else</span>
<a name="l00361"></a>00361       {
<a name="l00362"></a>00362         <a class="code" href="irrx__bitlength_8c.html#ac9824027f181031f48bd39dbf0369dba" title="IR receiver is connected to ICP (input capture pin).">IRRX_TRACE1_</a>(<span class="stringliteral">&quot;o&quot;</span>);
<a name="l00363"></a>00363       }
<a name="l00364"></a>00364 
<a name="l00365"></a>00365       <span class="comment">//Last bit?</span>
<a name="l00366"></a>00366       <span class="keywordflow">if</span> (irrx_internal.<a class="code" href="structirrx__internal__t.html#a3cdea5c22bc54a97502f2c7804864b4a" title="counted bits">bitcount</a> &gt;= <a class="code" href="irrx__bitlength_8c.html#a06fc87d81c62e9abb8790b6e5713c55ba3f5daacebcf87da900dcd02e164e76c6">irrx_bitcount_lastbit</a>)
<a name="l00367"></a>00367       {
<a name="l00368"></a>00368         <a class="code" href="irrx__bitlength_8c.html#ac9824027f181031f48bd39dbf0369dba" title="IR receiver is connected to ICP (input capture pin).">IRRX_TRACE1_</a>(<span class="stringliteral">&quot;s&quot;</span>);
<a name="l00369"></a>00369 
<a name="l00370"></a>00370         <span class="comment">//Check that ir code looks ok (not all protocol uses this function)</span>
<a name="l00371"></a>00371         <span class="keywordflow">if</span> (<a class="code" href="irrx__bitlength_8c.html#ae2df60b41e53e9bfc0579071132b453b">IRRX_RECEIVE_OK</a>(irrx_internal))
<a name="l00372"></a>00372         {
<a name="l00373"></a>00373           <a class="code" href="irrx__bitlength_8c.html#ac9824027f181031f48bd39dbf0369dba" title="IR receiver is connected to ICP (input capture pin).">IRRX_TRACE1_</a>(<span class="stringliteral">&quot;G&quot;</span>);
<a name="l00374"></a>00374           irrx_receivebuffer = <a class="code" href="irrx__bitlength_8c.html#a43071ea37b68a930615921eb53a7004a">IRRX_GETCODE</a>(irrx_internal);
<a name="l00375"></a>00375         }
<a name="l00376"></a>00376         <span class="keywordflow">else</span>
<a name="l00377"></a>00377         {
<a name="l00378"></a>00378           irrx_receivebuffer = <a class="code" href="irrx_8h.html#a9b37b956410016c9791cd56b63666f1f" title="No code received.">IRRX_NO_CODE</a>;
<a name="l00379"></a>00379         }
<a name="l00380"></a>00380         irrx_internal.<a class="code" href="structirrx__internal__t.html#a3cdea5c22bc54a97502f2c7804864b4a" title="counted bits">bitcount</a> = <a class="code" href="irrx__bitlength_8c.html#a06fc87d81c62e9abb8790b6e5713c55badd005af450210daf67855d5589f35fc4">irrx_bitcount_init</a>;
<a name="l00381"></a>00381       }
<a name="l00382"></a>00382       <span class="keywordflow">return</span>;
<a name="l00383"></a>00383     }
<a name="l00384"></a>00384   }
<a name="l00385"></a>00385   <a class="code" href="irrx__bitlength_8c.html#a6c26aa365afe752077c61762f87957d6">IRRX_TIMER1_ENABLE_ICP_FALLING_EDGE</a>();
<a name="l00386"></a>00386   irrx_internal.<a class="code" href="structirrx__internal__t.html#a3cdea5c22bc54a97502f2c7804864b4a" title="counted bits">bitcount</a> = <a class="code" href="irrx__bitlength_8c.html#a06fc87d81c62e9abb8790b6e5713c55badd005af450210daf67855d5589f35fc4">irrx_bitcount_init</a>;
<a name="l00387"></a>00387   <a class="code" href="irrx__bitlength_8c.html#ac9824027f181031f48bd39dbf0369dba" title="IR receiver is connected to ICP (input capture pin).">IRRX_TRACE1_</a>(<span class="stringliteral">&quot;Y&quot;</span>); 
<a name="l00388"></a>00388 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad39420cdd896dd12c68e36313139d0a5"></a><!-- doxytag: member="irrx_bitlength.c::ISR" ref="ad39420cdd896dd12c68e36313139d0a5" args="(TIMER1_COMPA_vect)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ISR </td>
          <td>(</td>
          <td class="paramtype">TIMER1_COMPA_vect&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>Timeout; no receive for some time, reset the bit count </p>
</p>

<p>Definition at line <a class="el" href="irrx__bitlength_8c_source.html#l00293">293</a> of file <a class="el" href="irrx__bitlength_8c_source.html">irrx_bitlength.c</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00294"></a>00294 {
<a name="l00296"></a>00296   <span class="keywordflow">if</span> (irrx_internal.<a class="code" href="structirrx__internal__t.html#a3cdea5c22bc54a97502f2c7804864b4a" title="counted bits">bitcount</a> != <a class="code" href="irrx__bitlength_8c.html#a06fc87d81c62e9abb8790b6e5713c55badd005af450210daf67855d5589f35fc4">irrx_bitcount_init</a>)
<a name="l00297"></a>00297   {
<a name="l00298"></a>00298     <a class="code" href="irrx__bitlength_8c.html#ac9824027f181031f48bd39dbf0369dba" title="IR receiver is connected to ICP (input capture pin).">IRRX_TRACE1_</a>(<span class="stringliteral">&quot;k&quot;</span>);
<a name="l00299"></a>00299   }
<a name="l00300"></a>00300   irrx_internal.<a class="code" href="structirrx__internal__t.html#a3cdea5c22bc54a97502f2c7804864b4a" title="counted bits">bitcount</a> = <a class="code" href="irrx__bitlength_8c.html#a06fc87d81c62e9abb8790b6e5713c55badd005af450210daf67855d5589f35fc4">irrx_bitcount_init</a>;
<a name="l00301"></a>00301   <span class="comment">//Set interrupt to detect start of start bit (falling edge because signal is inverted)</span>
<a name="l00302"></a>00302   <a class="code" href="irrx__bitlength_8c.html#a6c26aa365afe752077c61762f87957d6">IRRX_TIMER1_ENABLE_ICP_FALLING_EDGE</a>();
<a name="l00303"></a>00303 }
</pre></div></p>

</div>
</div>
</div>
<hr class="footer"/><address style="text-align: right;"><small>
Generated on Mon Jun 7 18:44:12 2010 for USB IR HID Device by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen.org</a> 1.6.3</small></address>
</body>
</html>
